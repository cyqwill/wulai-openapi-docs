# 自定义派发规则

自定义派发规则适用于几种需求场景：
- 通过吾来im接入用户，希望影响im派发行为。
- 通过自有客服工具接入用户，希望影响自有客服工具的派发行为。

分情况讨论：
## 通过吾来im接入用户，希望影响im派发行为
此时，只能用异步方式接入。
接入方可修改[消息路由接口](http://openapi.wul.ai/1.3.0/docs#operation/MessageRoute)接口中的is_dispatch字段。具体策略如下：

| 机器人派发策略 | 吾来默认派发逻辑 | 使用开放平台影响派发逻辑 |
| --- | --- | --- |
| 全自动 | 无论什么情况都不派发 | 回复给用户的候选回复，<br>如果is_dispatch改为true，<br>则派发<br>否则，无论什么情况都不派发 |
| 半自动 | 机器人不回复的情况派发 |  回复给用户的候选回复，<br>如果is_dispatch改为true，<br>则派发<br>否则，机器人不回复的情况派发|
| 辅助人工 | 无论什么情况都派发 | 开放平台无法影响派发逻辑， 无论什么情况都派发 |

## 通过自有客服工具接入用户，希望影响自有客服工具的派发行为
此时，只能用同步的方式接入。
接入方通过[获取机器人回复接口](http://openapi.wul.ai/1.3.0/docs#operation/GetBotResponse)获取到候选回复列表，根据每个候选回复的置信度得分(score字段)和其他定制化逻辑（如时间因素：白天派发、晚上不派发）来决定是否派发。